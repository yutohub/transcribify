[
  {
    "start": 8890,
    "end": 12858,
    "text": "みなさん、こんにちは！Slack python bot tutorialへようこそ。"
  },
  {
    "start": 12954,
    "end": 18350,
    "text": "今日のビデオでは、前回よりもかなり短いものになると思う。"
  },
  {
    "start": 18420,
    "end": 20570,
    "text": "これからやるのはリアクションの処理だ。"
  },
  {
    "start": 20650,
    "end": 23662,
    "text": "基本的に、誰かがメッセージに反応した場合、どう対処すればいいのか。"
  },
  {
    "start": 23716,
    "end": 27234,
    "text": "では、以前送ったウェルカムメッセージをどのように更新すればいいのでしょうか？"
  },
  {
    "start": 27362,
    "end": 29062,
    "text": "そうしよう。"
  },
  {
    "start": 29116,
    "end": 32246,
    "text": "まず最初に、コンソールに移動します。"
  },
  {
    "start": 32268,
    "end": 39602,
    "text": "のslack APIでも何でも、ボットのスコープにリアクションの読み取りパーミッションを追加するだけだ。"
  },
  {
    "start": 39746,
    "end": 41926,
    "text": "さて、前回のビデオでこの方法を紹介したと思う。"
  },
  {
    "start": 42028,
    "end": 44682,
    "text": "IMライトとリアクション・リードを追加した。"
  },
  {
    "start": 44816,
    "end": 46250,
    "text": "そのことをここに書き加えておいてほしい。"
  },
  {
    "start": 46320,
    "end": 48954,
    "text": "アプリを再インストールする必要があるかもしれません。"
  },
  {
    "start": 49072,
    "end": 54446,
    "text": "それでは、このメッセージで以前やったこととよく似たことをやってみましょう。"
  },
  {
    "start": 54548,
    "end": 59310,
    "text": "Slackのアンダースコア・イベント、アンダースコア・アダプターで言うつもりだ。"
  },
  {
    "start": 59380,
    "end": 61454,
    "text": "さて、これが何になるかは想像がつくだろう。"
  },
  {
    "start": 61652,
    "end": 62638,
    "text": "私はあなたを騙すつもりだ。"
  },
  {
    "start": 62644,
    "end": 64794,
    "text": "リアクション・アンダースコアが追加されるんだ。"
  },
  {
    "start": 64922,
    "end": 67566,
    "text": "これは反応を加えたことを意味する。"
  },
  {
    "start": 67678,
    "end": 71838,
    "text": "さて、スラックAPIに戻る必要がある。"
  },
  {
    "start": 71934,
    "end": 76162,
    "text": "その特定のイベントをサブスクライブする必要がある。"
  },
  {
    "start": 76216,
    "end": 77922,
    "text": "それをどう変えるか、お見せしましょう。"
  },
  {
    "start": 77976,
    "end": 80082,
    "text": "ボットイベントを購読しよう。"
  },
  {
    "start": 80226,
    "end": 86758,
    "text": "でも、ボット・ユーザーベントを追加して、リアクションを追加すればいいんだ。"
  },
  {
    "start": 86924,
    "end": 89722,
    "text": "その気になれば、リアクションを追加することもできる。"
  },
  {
    "start": 89856,
    "end": 91482,
    "text": "今はそのつもりはない。"
  },
  {
    "start": 91616,
    "end": 93734,
    "text": "リアクションを加えるだけだ。"
  },
  {
    "start": 93862,
    "end": 98874,
    "text": "さて、それでは戻って、この中に入ってみよう。"
  },
  {
    "start": 98912,
    "end": 101382,
    "text": "リアクションを定義しよう。"
  },
  {
    "start": 101446,
    "end": 102986,
    "text": "これを何と呼んでも構わない。"
  },
  {
    "start": 103088,
    "end": 103786,
    "text": "ここの中だ。"
  },
  {
    "start": 103808,
    "end": 108446,
    "text": "ペイロードを手に取り、文字通り、ここにある最初のいくつかをコピーするだけだ。"
  },
  {
    "start": 108468,
    "end": 111662,
    "text": "イベント、チャンネルID、ユーザーID。"
  },
  {
    "start": 111796,
    "end": 115586,
    "text": "よし、イベント、チャンネルID、ユーザーIDだ。"
  },
  {
    "start": 115688,
    "end": 128934,
    "text": "もしチャンネル・アンダースコアのIDがなかったら、何を返すか想像がつくと思うが、ウェルカム・メッセージを返すことになる。"
  },
  {
    "start": 129052,
    "end": 134278,
    "text": "ただ、このリアクションを追加するときに、実際にそうでないかどうかをチェックしていることを確認してほしい。"
  },
  {
    "start": 134444,
    "end": 139574,
    "text": "私たちが追加したリアクションが、ウェルカムメッセージが送信された場所ではないチャンネルにあった場合。"
  },
  {
    "start": 139612,
    "end": 141510,
    "text": "それなら、ウェルカムメッセージを実際に更新するつもりはない。"
  },
  {
    "start": 141580,
    "end": 141874,
    "text": "そうだね。"
  },
  {
    "start": 141932,
    "end": 149034,
    "text": "そういえば、ここで送信されるペイロードは、以前メッセージの中で送信されたものとは少し違っている。"
  },
  {
    "start": 149152,
    "end": 153162,
    "text": "この中でやらなければならないことは、ほんの少し変更するだけだ。"
  },
  {
    "start": 153216,
    "end": 159150,
    "text": "チャンネルidがイベントgetchannelと等しくなるのではなく、ちょっと変な感じですが、イベントgetとします。"
  },
  {
    "start": 159220,
    "end": 165230,
    "text": "この中で、itemコンマ、empty辞書、getチャンネルとする。"
  },
  {
    "start": 165380,
    "end": 171474,
    "text": "この理由は、やはり、送り返されるペイロードがここにあるものとは少し違って見えるからだ。"
  },
  {
    "start": 171512,
    "end": 173170,
    "text": "これはその対処法だ。"
  },
  {
    "start": 173240,
    "end": 176594,
    "text": "ペイロードを見たければ、プリントアウトすればいい。"
  },
  {
    "start": 176632,
    "end": 181046,
    "text": "イベントgetitemでは、itemはリアクションを追加したアイテムです。"
  },
  {
    "start": 181068,
    "end": 181302,
    "text": "そうだね。"
  },
  {
    "start": 181356,
    "end": 183734,
    "text": "そして、そのアイテムがいたチャンネルを取得する。"
  },
  {
    "start": 183772,
    "end": 185334,
    "text": "これが唯一の大きな変更点だ。"
  },
  {
    "start": 185372,
    "end": 187398,
    "text": "がチャンネルIDに等しい。"
  },
  {
    "start": 187564,
    "end": 194954,
    "text": "そしてこの後、ウェルカム・イコール・ウェルカム・アンダースコア・メッセージ・チャンネルと言うことになる。"
  },
  {
    "start": 195152,
    "end": 198666,
    "text": "次に、この中にあるユーザー・アンダースコアidにアクセスする。"
  },
  {
    "start": 198768,
    "end": 202154,
    "text": "さて、実際にはこれを変更する必要があるかもしれないが、今はこれを見ておこう。"
  },
  {
    "start": 202272,
    "end": 203354,
    "text": "申し訳ないが、これはチャンネルではない。"
  },
  {
    "start": 203392,
    "end": 203754,
    "text": "私のミスだ。"
  },
  {
    "start": 203792,
    "end": 205710,
    "text": "これをチャンネルIDに変更する必要がある。"
  },
  {
    "start": 205860,
    "end": 212160,
    "text": "さて、ウェルカムメッセージができたので、これからすることは、welcome completed equals trueとすることだ。"
  },
  {
    "start": 213170,
    "end": 213870,
    "text": "さあ、行こう。"
  },
  {
    "start": 213940,
    "end": 214894,
    "text": "完了は真に等しい。"
  },
  {
    "start": 214932,
    "end": 216318,
    "text": "オートコンプリートを教えてくれ。"
  },
  {
    "start": 216404,
    "end": 220258,
    "text": "メッセージに反応した時点で、私たちの仕事は完了したのだから。"
  },
  {
    "start": 220344,
    "end": 220690,
    "text": "そうだね。"
  },
  {
    "start": 220760,
    "end": 226446,
    "text": "チェックマークがあるところを見てください。"
  },
  {
    "start": 226478,
    "end": 227554,
    "text": "そうだね。"
  },
  {
    "start": 227592,
    "end": 230870,
    "text": "実際にはチェックマークであり、白い大きな四角ではない。"
  },
  {
    "start": 231020,
    "end": 232422,
    "text": "よし、とにかく次だ。"
  },
  {
    "start": 232476,
    "end": 235702,
    "text": "これからすることは、このメッセージを再送するか更新することだ。"
  },
  {
    "start": 235756,
    "end": 243610,
    "text": "そのためには、メッセージをウェルカム・ドットと等しくして、このようなメッセージを受け取ろう。"
  },
  {
    "start": 243760,
    "end": 247370,
    "text": "これで、ボックスの代わりにチェックマークが付いた最新のメッセージが表示される。"
  },
  {
    "start": 247520,
    "end": 255002,
    "text": "その後にすることは、更新されたアンダースコア・メッセージとクライアント・チャットのアンダースコア・アップデートが等しいということだ。"
  },
  {
    "start": 255146,
    "end": 257642,
    "text": "アップデートのメッセージではないと思う。"
  },
  {
    "start": 257786,
    "end": 261486,
    "text": "そして、この中にアスタリスク・アスタリスクとメッセージを入れる。"
  },
  {
    "start": 261668,
    "end": 271902,
    "text": "そして最後に、タイムスタンプ・イコールを歓迎し、更新メッセージtsに変更します。"
  },
  {
    "start": 272046,
    "end": 274670,
    "text": "よし、ここでちょっと見てみよう。"
  },
  {
    "start": 274840,
    "end": 276466,
    "text": "スラックに行こう。"
  },
  {
    "start": 276658,
    "end": 278102,
    "text": "おっと、そこじゃない。"
  },
  {
    "start": 278156,
    "end": 279414,
    "text": "チャンネルに入ろう。"
  },
  {
    "start": 279532,
    "end": 281080,
    "text": "テストに入ろう。"
  },
  {
    "start": 281690,
    "end": 287286,
    "text": "さあ、スタートダッシュを決めましょう。"
  },
  {
    "start": 287468,
    "end": 288470,
    "text": "どうなっているんだ？"
  },
  {
    "start": 288540,
    "end": 289238,
    "text": "どうしたんだ？"
  },
  {
    "start": 289324,
    "end": 291446,
    "text": "まあ、私がサーバーを運営していれば助かるんだけどね。"
  },
  {
    "start": 291478,
    "end": 292730,
    "text": "何かの理由でクラッシュしたのだろう。"
  },
  {
    "start": 292800,
    "end": 293894,
    "text": "サーバーを動かしてみよう。"
  },
  {
    "start": 294022,
    "end": 295610,
    "text": "スラックに戻ろう。"
  },
  {
    "start": 296110,
    "end": 297578,
    "text": "まずはタイプしてみよう。"
  },
  {
    "start": 297744,
    "end": 299350,
    "text": "我々はこのDMを手に入れたと見ている。"
  },
  {
    "start": 299430,
    "end": 300170,
    "text": "オーケー、素晴らしい。"
  },
  {
    "start": 300240,
    "end": 301674,
    "text": "では、このメッセージに反応してみよう。"
  },
  {
    "start": 301792,
    "end": 303210,
    "text": "反応を見てみよう。"
  },
  {
    "start": 303290,
    "end": 303914,
    "text": "ブームだ。"
  },
  {
    "start": 304042,
    "end": 305678,
    "text": "ちょっと待ってくれ。"
  },
  {
    "start": 305844,
    "end": 307070,
    "text": "何かが間違っていた。"
  },
  {
    "start": 307140,
    "end": 307902,
    "text": "何が悪かったのか？"
  },
  {
    "start": 307956,
    "end": 308654,
    "text": "見てみよう。"
  },
  {
    "start": 308692,
    "end": 309438,
    "text": "さあ、行こう。"
  },
  {
    "start": 309604,
    "end": 310880,
    "text": "うまくいっていない。"
  },
  {
    "start": 311250,
    "end": 315758,
    "text": "それで、ちょっといじくりまわしてみたんだけど、何が問題なのかわかったよ。"
  },
  {
    "start": 315844,
    "end": 320818,
    "text": "ユーザーIDとチャンネルIDをプリントアウトして見てみたんだ。"
  },
  {
    "start": 320904,
    "end": 330774,
    "text": "さて、ここで問題になるのは、チャンネルIDを取得したときに実際に得られるものが、ウェルカムメッセージの中に保存したものとは異なるということだ。"
  },
  {
    "start": 330892,
    "end": 338182,
    "text": "その理由は、ウェルカムメッセージの中に格納されているのは、単にこのf文字列、つまりatとユーザーiDだからだ。"
  },
  {
    "start": 338316,
    "end": 341218,
    "text": "これはチャンネルIDとは違う。"
  },
  {
    "start": 341324,
    "end": 347526,
    "text": "技術的には、これらは同じものを表し、ユーザーのダイレクトメッセージの受信箱という同じ場所を指す。"
  },
  {
    "start": 347638,
    "end": 353670,
    "text": "これらは異なるので、チャンネルIDがウェルカムメッセージの中にあるかどうかを単純にチェックすることはできない。"
  },
  {
    "start": 353750,
    "end": 362800,
    "text": "ここで私ができることは、トライ・キャッチをすることで、このメッセージの送信を試み、もしうまくいかなければ、それをキャッチしてきれいにリターンするという、ちょっとハックな解決策だ。"
  },
  {
    "start": 363170,
    "end": 364686,
    "text": "それはうまくいく可能性がある。"
  },
  {
    "start": 364788,
    "end": 369582,
    "text": "また、atユーザーIDがウェルカムメッセージの中にあるかどうかをチェックすることもできます。"
  },
  {
    "start": 369646,
    "end": 371810,
    "text": "その代わりに私ができることは、次のようなことだ。"
  },
  {
    "start": 371960,
    "end": 379986,
    "text": "atの文字列とユーザーIDの文字列がウェルカムメッセージの中にあれば、それを実行すればいい。"
  },
  {
    "start": 380008,
    "end": 381270,
    "text": "うまくいくかどうか見てみよう。"
  },
  {
    "start": 381340,
    "end": 386854,
    "text": "まず第一に、ここで返された内容だけでは、それがうまくいくとは100％思えないからだ。"
  },
  {
    "start": 386972,
    "end": 388598,
    "text": "試してみよう。"
  },
  {
    "start": 388764,
    "end": 391260,
    "text": "さあ、テストに行こう。"
  },
  {
    "start": 391710,
    "end": 393226,
    "text": "まずはタイプしてみよう。"
  },
  {
    "start": 393408,
    "end": 396682,
    "text": "DMが届いて、このメッセージに反応しよう。"
  },
  {
    "start": 396736,
    "end": 398410,
    "text": "ただ、これを画面上でもっと動かす必要がある。"
  },
  {
    "start": 398480,
    "end": 402410,
    "text": "リアクションが変わるかどうか見てみよう。"
  },
  {
    "start": 402480,
    "end": 403674,
    "text": "いや、それは変わらない。"
  },
  {
    "start": 403712,
    "end": 404846,
    "text": "ここを見てみよう。"
  },
  {
    "start": 404948,
    "end": 406206,
    "text": "何が問題なのか？"
  },
  {
    "start": 406228,
    "end": 408254,
    "text": "キーエラーはこうだ。"
  },
  {
    "start": 408452,
    "end": 410894,
    "text": "本質的に、これは何を言っているのか？"
  },
  {
    "start": 411092,
    "end": 412462,
    "text": "なるほど、ここが問題なんだな。"
  },
  {
    "start": 412516,
    "end": 415854,
    "text": "これを変えたのに、これを変えなかったのは大きな問題だ。"
  },
  {
    "start": 415892,
    "end": 419666,
    "text": "この文字列をコピーして、ここに貼り付けよう。"
  },
  {
    "start": 419688,
    "end": 420594,
    "text": "これでうまくいくはずだ。"
  },
  {
    "start": 420632,
    "end": 421922,
    "text": "これは実際に機能した。"
  },
  {
    "start": 421976,
    "end": 425710,
    "text": "そのため、returnステートメントを通り越して進んでしまったので、実際にエラーが出たのだ。"
  },
  {
    "start": 425790,
    "end": 433574,
    "text": "atユーザーと同じように、このユーザーも、ここでは何と呼んでいるのだろう？"
  },
  {
    "start": 433612,
    "end": 434434,
    "text": "歓迎のメッセージ"
  },
  {
    "start": 434482,
    "end": 438054,
    "text": "そこから参照すれば問題ないだろう。"
  },
  {
    "start": 438172,
    "end": 442246,
    "text": "でも、これ以上誰かを誤解させる前に、これが機能していることを確認したいんだ。"
  },
  {
    "start": 442358,
    "end": 443834,
    "text": "さあ、始めよう。"
  },
  {
    "start": 444032,
    "end": 451642,
    "text": "よし、ここに戻って、このメッセージにリアクションをしてみよう。"
  },
  {
    "start": 451696,
    "end": 453578,
    "text": "もちろん、機能していない。"
  },
  {
    "start": 453744,
    "end": 457742,
    "text": "チャンネルIDが見つからないというエラーが出た。"
  },
  {
    "start": 457796,
    "end": 464030,
    "text": "ユーザーIDでFに送り返そうとしているのですが、なぜかうまくいきません。"
  },
  {
    "start": 464180,
    "end": 466778,
    "text": "このslack APIはどこかおかしい。"
  },
  {
    "start": 466954,
    "end": 471326,
    "text": "いつもAPIのせいにするのは嫌いだが、この参照方法は間違いなくおかしい。"
  },
  {
    "start": 471438,
    "end": 475474,
    "text": "この問題を解決するために、私はある種の厄介な解決策を実行しなければならない。"
  },
  {
    "start": 475592,
    "end": 484566,
    "text": "さて、これからすることは、ウェルカム・チャンネル・イコールと言って、これを新しいメッセージを受け取る前のチャンネルIDと等しくすることだ。"
  },
  {
    "start": 484668,
    "end": 491254,
    "text": "これは、ウェルカムメッセージのチャンネルを、このDMが送信された実際のチャンネルと同じに変更するものです。"
  },
  {
    "start": 491372,
    "end": 494682,
    "text": "これは、以前使ったatタグのようなものではなく、idだ。"
  },
  {
    "start": 494816,
    "end": 505354,
    "text": "これで、以前このユーザーIDを使ってダイレクト・メッセージを送信したり、ダイレクト・メッセージを再度更新しようとしたときに発生したエラーを防ぐことができるはずだ。"
  },
  {
    "start": 505392,
    "end": 508094,
    "text": "なぜうまくいかないのかわからないが、これで解決するはずだ。"
  },
  {
    "start": 508132,
    "end": 518562,
    "text": "そうすると、チャンネルをユーザーIDではなく、チャンネルIDと等しいチャンネルに変更することになるからだ。"
  },
  {
    "start": 518696,
    "end": 526226,
    "text": "まあ、その状況ではその通りだが、すでに反応してメッセージを編集しているのだから、これを読み飛ばしても問題はないはずだ。"
  },
  {
    "start": 526248,
    "end": 533830,
    "text": "むしろ、ウェルカムメッセージにそのキーを入れないほうがいいくらいだ。"
  },
  {
    "start": 533980,
    "end": 535142,
    "text": "意味が通じているといいのだが。"
  },
  {
    "start": 535196,
    "end": 540194,
    "text": "君たちを混乱させていたら本当に申し訳ないんだけど、これがうまくいかないときに僕にできることはあまりないんだ。"
  },
  {
    "start": 540332,
    "end": 541754,
    "text": "テストに行こう"
  },
  {
    "start": 541872,
    "end": 543900,
    "text": "さあ、始めよう。"
  },
  {
    "start": 544270,
    "end": 545546,
    "text": "そう入力してみよう。"
  },
  {
    "start": 545648,
    "end": 546934,
    "text": "DMを獲得できることを願っている。"
  },
  {
    "start": 546982,
    "end": 549062,
    "text": "まあ、僕がサーバーを運営していれば助かるんだけどね。"
  },
  {
    "start": 549126,
    "end": 549514,
    "text": "もちろんだ。"
  },
  {
    "start": 549552,
    "end": 555002,
    "text": "今日はいろんなバグに出くわしているから、戻ってタイプから始めよう。"
  },
  {
    "start": 555136,
    "end": 556558,
    "text": "DMをご覧ください。"
  },
  {
    "start": 556644,
    "end": 558110,
    "text": "では、このメッセージに反応してみよう。"
  },
  {
    "start": 558180,
    "end": 559370,
    "text": "反応しろ"
  },
  {
    "start": 559530,
    "end": 562350,
    "text": "クールなスマイリーフェイスを追加して、ちょっと待って。"
  },
  {
    "start": 562420,
    "end": 566158,
    "text": "ようやく白いチェックマークが表示された。"
  },
  {
    "start": 566244,
    "end": 567546,
    "text": "確かにとても悔しかった。"
  },
  {
    "start": 567578,
    "end": 572462,
    "text": "繰り返しになりますが、なぜこのような現象が起きていたのか分かりませんが、今なら私たちがこのメッセージを編集し、メッセージのタイムスタンプが更新されたことが分かります。"
  },
  {
    "start": 572526,
    "end": 576322,
    "text": "実際、私がそれに反応しようとしても、何も起こらないことに気づくだろう。"
  },
  {
    "start": 576376,
    "end": 587906,
    "text": "タイムスタンプが変わらないのは、ここでもまた、このブロックにぶつかるのでスキップすることになるが、ウェルカムメッセージの中にユーザーIDのfが保存されなくなるからだ。"
  },
  {
    "start": 587938,
    "end": 590134,
    "text": "この続きはもういい。"
  },
  {
    "start": 590252,
    "end": 592914,
    "text": "とにかく、リアクションの処理については以上だ。"
  },
  {
    "start": 592962,
    "end": 597814,
    "text": "さて、ここでできることは他にもあるが、これがイベントの設定方法であり、メッセージを修正する方法である。"
  },
  {
    "start": 597932,
    "end": 599946,
    "text": "混乱を招いたことをお詫びする。"
  },
  {
    "start": 600018,
    "end": 600782,
    "text": "こういうこともある。"
  },
  {
    "start": 600836,
    "end": 602734,
    "text": "私も皆さんと同じ人間です。"
  },
  {
    "start": 602852,
    "end": 604782,
    "text": "次のビデオで何を見たいか教えてください。"
  },
  {
    "start": 604836,
    "end": 606990,
    "text": "まだ全部は決まっていない。"
  },
  {
    "start": 607060,
    "end": 611900,
    "text": "いつものように、もし楽しんでいただけたら、「いいね！」を残してチャンネル登録をしてください。"
  }
]