[
  {
    "start": 8570,
    "end": 13418,
    "text": "皆さん、こんにちは。Slackbotチュートリアル・シリーズのビデオ2へようこそ。"
  },
  {
    "start": 13514,
    "end": 15914,
    "text": "このビデオではイベントについてお話しします。"
  },
  {
    "start": 15962,
    "end": 18986,
    "text": "イベントを実際に購読するには？"
  },
  {
    "start": 19098,
    "end": 23982,
    "text": "つまり、今、私たちにできるのはメッセージを送ることだけなのだ。"
  },
  {
    "start": 24036,
    "end": 25366,
    "text": "他にもいくつかできることがある。"
  },
  {
    "start": 25388,
    "end": 30690,
    "text": "私たちはメッセージをピン留めし、それに反応することはできるが、これらのチャンネルの内部で何が起こっているかを見ることはできない。"
  },
  {
    "start": 30770,
    "end": 32182,
    "text": "他の人たちが何をしているかなんてわからない。"
  },
  {
    "start": 32236,
    "end": 34486,
    "text": "誰かがメッセージを送ったとしても、私たちはそれを見ることができない。"
  },
  {
    "start": 34588,
    "end": 38854,
    "text": "私たちがボットを持っているとき、多くの場合、私たちがしたいことは何かをできるようにすることです。"
  },
  {
    "start": 38972,
    "end": 46106,
    "text": "ユーザーがチャンネル内で何かコマンドを実行したり、特別なことをしたとき、もしかしたら汚い言葉を発したかもしれない。"
  },
  {
    "start": 46128,
    "end": 48298,
    "text": "それは私たちができることの一例です。"
  },
  {
    "start": 48464,
    "end": 56558,
    "text": "このチャンネルで何かが起こったときに、ボットがアラートを出すように設定する必要があります。"
  },
  {
    "start": 56724,
    "end": 61546,
    "text": "さて、この実装が実際にどのように機能するかという点では、少々複雑だ。"
  },
  {
    "start": 61578,
    "end": 62766,
    "text": "そんなに難しくはないだろう。"
  },
  {
    "start": 62868,
    "end": 73390,
    "text": "slackのAPI paidに戻り、event subscriptionsと書いてあるところに行き、これらのイベントを購読するようにいくつかの設定を始める必要がある。"
  },
  {
    "start": 73470,
    "end": 76958,
    "text": "これからすることは、イネーブル・イベントをオンにすることだ。"
  },
  {
    "start": 77144,
    "end": 82194,
    "text": "さて、ここで最初に要求されるのはリクエストURLであることに注目してほしい。"
  },
  {
    "start": 82322,
    "end": 94950,
    "text": "つまり、イベントが発生すると、slack APIはpostリクエストをウェブサーバーに送るということだ。"
  },
  {
    "start": 95030,
    "end": 100342,
    "text": "これから行うのは、実際にボットを動かすことで、今はまだウェブ・サーバー上では行っていない。"
  },
  {
    "start": 100406,
    "end": 108494,
    "text": "ウェブサーバー上で動作するということは、つまり、24時間365日稼働し、独自のURLを持つということだ。"
  },
  {
    "start": 108532,
    "end": 109326,
    "text": "ウェブサイトのようにね。"
  },
  {
    "start": 109428,
    "end": 111018,
    "text": "もし私がtechwithtim."
  },
  {
    "start": 111114,
    "end": 117006,
    "text": "ウェブ・サーバー上で動いているネットにアクセスすると、HTMLが返され、それが私のスクリーンにレンダリングされる。"
  },
  {
    "start": 117108,
    "end": 118714,
    "text": "まあ、これは少し違った形で機能しそうだ。"
  },
  {
    "start": 118762,
    "end": 121146,
    "text": "これから起こることは、ウェブサーバー上で動くということだ。"
  },
  {
    "start": 121178,
    "end": 123450,
    "text": "ウェブサイトではなく、単なるウェブサーバーになる。"
  },
  {
    "start": 123530,
    "end": 130102,
    "text": "イベントが発生すると、そのウェブサーバーにリクエストが送信される。"
  },
  {
    "start": 130156,
    "end": 135654,
    "text": "例えば、ユーザーがメッセージを送ったら、メッセージを送り返したり、挨拶したり、そんなことができる。"
  },
  {
    "start": 135772,
    "end": 139062,
    "text": "そのためには、いくつかの異なることから始める必要がある。"
  },
  {
    "start": 139116,
    "end": 143078,
    "text": "まずやるべきことは、Ngrokというツールをインストールすることだ。"
  },
  {
    "start": 143174,
    "end": 150474,
    "text": "ングロク、その理由は、少なくとも今は、ウェブサーバーをローカルのコンピューターで動かすつもりだからだ。"
  },
  {
    "start": 150512,
    "end": 155966,
    "text": "後でこのボットを配布するときは、誰もがアクセスできる公開ウェブサーバーのようなもので実行する。"
  },
  {
    "start": 156068,
    "end": 158414,
    "text": "今のところ、ローカルのコンピューターで実行している。"
  },
  {
    "start": 158532,
    "end": 168842,
    "text": "Ngrokというソフトをインストールすれば、パブリックIPアドレスやパブリック・ドメインを取得し、それをローカルのウェブ・サーバーにルーティングすることができる。"
  },
  {
    "start": 168906,
    "end": 170866,
    "text": "ダウンロードをクリックしてください。"
  },
  {
    "start": 170888,
    "end": 171874,
    "text": "これは完全に無料だ。"
  },
  {
    "start": 171912,
    "end": 173842,
    "text": "有料版もあるが、それは必要ない。"
  },
  {
    "start": 173896,
    "end": 176254,
    "text": "Windowsをお使いの場合は、当然Windows用をダウンロードしてください。"
  },
  {
    "start": 176302,
    "end": 179954,
    "text": "MacやLinuxをお使いの方は、それぞれのプラットフォーム用にダウンロードしてください。"
  },
  {
    "start": 180082,
    "end": 181718,
    "text": "さて、ここにいくつかの指示がある。"
  },
  {
    "start": 181804,
    "end": 183094,
    "text": "いくつか違うことをしなければならないかもしれない。"
  },
  {
    "start": 183132,
    "end": 186758,
    "text": "LinuxやmacOSを使っているなら、ここでチェックできる。"
  },
  {
    "start": 186844,
    "end": 196442,
    "text": "このソフトは、これまで使っていたものとは少し仕組みが違うからだ。"
  },
  {
    "start": 196576,
    "end": 199126,
    "text": "とにかく、私のはダウンロードフォルダの中に保存されている。"
  },
  {
    "start": 199158,
    "end": 201946,
    "text": "ダウンロードを見ると、ここにングロクがある。"
  },
  {
    "start": 202048,
    "end": 207470,
    "text": "そのフォルダーを解凍し、アプリケーション・ファイルを持って、忘れない場所に置いてください。"
  },
  {
    "start": 207540,
    "end": 211102,
    "text": "実際、やろうと思えばこの中に入れることもできる。"
  },
  {
    "start": 211236,
    "end": 213674,
    "text": "このディレクトリで動かすのは難しそうだ。"
  },
  {
    "start": 213802,
    "end": 216110,
    "text": "もちろん、置こうと思えば置ける。"
  },
  {
    "start": 216260,
    "end": 220730,
    "text": "さて、次に必要なのは、Pipからさらにいくつかのパッケージをインストールすることだ。"
  },
  {
    "start": 220810,
    "end": 229458,
    "text": "これからウェブサーバーを動かすので、Flaskというモジュールを使う。"
  },
  {
    "start": 229474,
    "end": 234230,
    "text": "pipでflaskをインストールする。"
  },
  {
    "start": 234380,
    "end": 237446,
    "text": "もう一度言うが、私はすでに君たちのために満足している。"
  },
  {
    "start": 237468,
    "end": 239238,
    "text": "いろいろなものがインストールされるはずだ。"
  },
  {
    "start": 239324,
    "end": 246886,
    "text": "次にやることは、Pip、インストール、slack events APIだ。"
  },
  {
    "start": 247078,
    "end": 249866,
    "text": "そこに貼っておくから、それが何なのか見てほしい。"
  },
  {
    "start": 249968,
    "end": 254822,
    "text": "これは実際にslackから来るイベントを処理し、取得するために使うものだ。"
  },
  {
    "start": 254966,
    "end": 258510,
    "text": "さて、この2つの取り付けが終わったところで、さあ、仕上げだ。"
  },
  {
    "start": 258580,
    "end": 265362,
    "text": "Pythonファイルを修正し、Slack APIページに戻って、いくつか違うものを追加します。"
  },
  {
    "start": 265496,
    "end": 272370,
    "text": "まず最初にやることは、flaskから大文字でflaskをインポートするということだ。"
  },
  {
    "start": 272520,
    "end": 283778,
    "text": "それから、クライアントを起動した直後でも、その前でも、実はどこでもいいのだが、app equalsと言い、次にflaskと言い、アンダースコア、アンダースコア名、アンダースコア、アンダースコアと言う。"
  },
  {
    "start": 283874,
    "end": 287074,
    "text": "これは単にPythonの中にある変数だ。"
  },
  {
    "start": 287122,
    "end": 289670,
    "text": "ファイル名を表す。"
  },
  {
    "start": 290250,
    "end": 294666,
    "text": "なぜそんなことが必要なのかは説明するまでもないだろうが、これは単にflaskアプリケーションを設定する方法だ。"
  },
  {
    "start": 294848,
    "end": 297482,
    "text": "これで、flaskアプリケーションを実行するのがとても簡単になった。"
  },
  {
    "start": 297616,
    "end": 309066,
    "text": "プログラムの一番下にif文を設定して、ifアンダースコア、アンダースコア・ネーム、アンダースコア、アンダースコア・イコール、そして文字列の中に、アンダースコア、アンダースコア・メイン、アンダースコア、アンダースコアと書くのだ。"
  },
  {
    "start": 309178,
    "end": 314542,
    "text": "単純に、アプリを実行して、デバッグはtrueに等しいと言うことができる。"
  },
  {
    "start": 314676,
    "end": 317134,
    "text": "さて、これで私たちのフラスコ・アプリケーションを取り込むことができる。"
  },
  {
    "start": 317252,
    "end": 321074,
    "text": "これはデフォルトのポートで実行され、ポート5000だと思う。"
  },
  {
    "start": 321192,
    "end": 327922,
    "text": "ポート番号を変更したい場合は、ポート番号をequalsにして、まだ使われていない整数値を設定すればいい。"
  },
  {
    "start": 328056,
    "end": 334914,
    "text": "デバッグがすることは、このファイルを保存したり変更したりしても、pythonスクリプトを再実行する必要はない、ということです。"
  },
  {
    "start": 334962,
    "end": 336886,
    "text": "自動的に再走してくれる"
  },
  {
    "start": 336908,
    "end": 341026,
    "text": "ウェブ・サーバーを自動的にアップデートしてくれる。"
  },
  {
    "start": 341138,
    "end": 351462,
    "text": "ということは、もしこのファイルをインポートせず、実際にこのファイルを直接実行したら、このif文が言っているように、ウェブサーバーを実行してください、ということです。"
  },
  {
    "start": 351526,
    "end": 354502,
    "text": "別のファイルからインポートしたからだ。"
  },
  {
    "start": 354566,
    "end": 359930,
    "text": "おそらく、このファイルから変数などを取っているときにウェブサーバーを起動させたくないのだろう。"
  },
  {
    "start": 360090,
    "end": 361950,
    "text": "わかった。"
  },
  {
    "start": 362020,
    "end": 373118,
    "text": "次にやることは、Slack events APIから、Slack event adapterをインポートすることだ。"
  },
  {
    "start": 373294,
    "end": 374754,
    "text": "これはちょっと奇妙なことだ。"
  },
  {
    "start": 374792,
    "end": 379862,
    "text": "これが何をするものなのか、正確に説明するのは難しいんだけど、これがすべてのイベントを処理してくれるんだ。"
  },
  {
    "start": 379916,
    "end": 390450,
    "text": "アプリを作成した後に、Slackのアンダースコア・イベント、つまりアンダースコア・アダプタとSlackのイベント・アダプタが同じであることを確認する。"
  },
  {
    "start": 390530,
    "end": 396330,
    "text": "そしてこの中で、何かを渡す必要がある。"
  },
  {
    "start": 396480,
    "end": 399322,
    "text": "この2つが何なのかについては、また後で話そう。"
  },
  {
    "start": 399376,
    "end": 400666,
    "text": "実は、中間的なことはできる。"
  },
  {
    "start": 400768,
    "end": 410542,
    "text": "slackイベントと言いたいところだが、このイベントにはSlack APIウェブサイトから取得した署名シークレットを渡す必要がある。"
  },
  {
    "start": 410676,
    "end": 414570,
    "text": "つまり、Slackイベント・アダプターを追加するということだ。"
  },
  {
    "start": 414650,
    "end": 420446,
    "text": "このイベントアダプタを使うと、Slack API から送られてくるさまざまなイベントを処理できるようになる。"
  },
  {
    "start": 420558,
    "end": 424354,
    "text": "よし、このルートにしよう。"
  },
  {
    "start": 424392,
    "end": 429718,
    "text": "slackイベントは、これらのさまざまなイベントの送信先となる。"
  },
  {
    "start": 429804,
    "end": 433334,
    "text": "アプリケーションは、これらのイベントをどのウェブサーバーに送信するのか？"
  },
  {
    "start": 433372,
    "end": 437250,
    "text": "さて、このアプリは現在稼働中のウェブ・サーバーだ。"
  },
  {
    "start": 437330,
    "end": 438642,
    "text": "それが理解できればいいのだが......。"
  },
  {
    "start": 438796,
    "end": 442390,
    "text": "Slackのウェブサイト、Slack APIに戻ろう。"
  },
  {
    "start": 442470,
    "end": 449382,
    "text": "基本情報に移動して下にスクロールすると、署名の秘密というものがあります。"
  },
  {
    "start": 449526,
    "end": 454170,
    "text": "さて、これからすることは、まあ、これはぼかしを入れてもらうとして、このサインシークレットをコピーすることだ。"
  },
  {
    "start": 454250,
    "end": 468094,
    "text": "envファイルを開き、slackトークンを作成したのと同じように、signing underscore secret equalsと書き、先ほど取得したトークンやsecretと等しくなるように設定する。"
  },
  {
    "start": 468222,
    "end": 477998,
    "text": "さて、前回と同じように、OSエンビロンでも何でもいいので、このファイルから署名秘密を取得する。"
  },
  {
    "start": 478094,
    "end": 479982,
    "text": "ここにコピーしておくよ。"
  },
  {
    "start": 480136,
    "end": 484290,
    "text": "これをslackイベント・アダプターの最初の引数として貼り付ける。"
  },
  {
    "start": 484370,
    "end": 488514,
    "text": "今、スラック・トークンの代わりに、サインと言おうと思う。"
  },
  {
    "start": 488562,
    "end": 492262,
    "text": "すべて大文字で、アンダースコアで秘密はこうだ。"
  },
  {
    "start": 492396,
    "end": 494874,
    "text": "ほら、保存しておいたよ。"
  },
  {
    "start": 494912,
    "end": 500122,
    "text": "次の行にはslack event adapter、signing secret、行きたいルート、そしてappとある。"
  },
  {
    "start": 500256,
    "end": 504102,
    "text": "よし、ここからが少し複雑になるが、おかしなことではない。"
  },
  {
    "start": 504176,
    "end": 506398,
    "text": "これからすることは、これを実行することだ。"
  },
  {
    "start": 506484,
    "end": 510730,
    "text": "私はただ、私が何かをひどく台無しにしていないことを確認したいだけなんだ。"
  },
  {
    "start": 510890,
    "end": 512814,
    "text": "実際、私たちは優秀だと思う。"
  },
  {
    "start": 512852,
    "end": 513054,
    "text": "オーケー。"
  },
  {
    "start": 513092,
    "end": 520686,
    "text": "ウェブ・サーバーが稼動していることが確認でき、このような出力が得られる。"
  },
  {
    "start": 520798,
    "end": 527970,
    "text": "今現在、HTTP 12701 5000で動作していると書いてある。"
  },
  {
    "start": 528040,
    "end": 529134,
    "text": "それはただのローカルホストだ。"
  },
  {
    "start": 529182,
    "end": 529442,
    "text": "そうだね。"
  },
  {
    "start": 529496,
    "end": 531590,
    "text": "ここで注目してほしいのは、このポートだ。"
  },
  {
    "start": 531660,
    "end": 534838,
    "text": "このポートが重要なのは、次のステップでこれを使う必要があるからだ。"
  },
  {
    "start": 534924,
    "end": 538694,
    "text": "私の場合は5000番台だが、おそらくあなたも5000番台だろう。"
  },
  {
    "start": 538732,
    "end": 543426,
    "text": "もしここに違う数字があったら、次のステップで私がすることとその数字を入れ替えてください。"
  },
  {
    "start": 543548,
    "end": 548794,
    "text": "これからすることは、Ngrokプログラムがあった場所を探して、それをダブルクリックして実行することだ。"
  },
  {
    "start": 548832,
    "end": 554534,
    "text": "MacやLinuxを使っている場合は、Ngrokのウェブサイトに戻って、その指示に従ってください。"
  },
  {
    "start": 554592,
    "end": 557694,
    "text": "それほど複雑ではないが、基本的にはそのプログラムを実行するだけでいい。"
  },
  {
    "start": 557812,
    "end": 560042,
    "text": "ングロックをダブルクリックしてみるよ。"
  },
  {
    "start": 560106,
    "end": 562218,
    "text": "そして今、私はCMDの中にいる。"
  },
  {
    "start": 562314,
    "end": 566158,
    "text": "小文字でングロクと打つんだ。"
  },
  {
    "start": 566324,
    "end": 570658,
    "text": "また、発音がそうなのかどうか全く分からないので、もしずっとブッチしていたら申し訳ない。"
  },
  {
    "start": 570744,
    "end": 577266,
    "text": "HTTPと入力し、次にサーバーが稼動しているポートの番号を入力する。"
  },
  {
    "start": 577288,
    "end": 582486,
    "text": "この場合、ngrok HTTP 5000でエンターキーを押す。"
  },
  {
    "start": 582588,
    "end": 586630,
    "text": "そうすれば、このようなものがここに出てくることになる。"
  },
  {
    "start": 586700,
    "end": 589458,
    "text": "転送と書いてあるところを見てほしい。"
  },
  {
    "start": 589554,
    "end": 606030,
    "text": "このプログラムを実行することで、このパブリックIPアドレス（HTTPブラブラ）をローカル・ホストのウェブ・サーバーに向けることができる。"
  },
  {
    "start": 606100,
    "end": 609934,
    "text": "これはこのlocalhostアドレスを指す。"
  },
  {
    "start": 610052,
    "end": 617626,
    "text": "これは無料版のソフトウェアであるため、このツールを再実行し、実行し続ける必要がある場合はいつでも、このウィンドウを閉じることができないことを覚えておいてください。"
  },
  {
    "start": 617658,
    "end": 620930,
    "text": "このアドレスは変更されます。"
  },
  {
    "start": 621000,
    "end": 626098,
    "text": "有料版では、アドレスが常に変更されないよう、永久的なアドレスを持つことができます。"
  },
  {
    "start": 626264,
    "end": 627618,
    "text": "僕らにとっては、そんなことは関係ない。"
  },
  {
    "start": 627704,
    "end": 629842,
    "text": "いずれにせよ、これは単なる開発目的だ。"
  },
  {
    "start": 629906,
    "end": 631222,
    "text": "このアドレスをコピーしてください。"
  },
  {
    "start": 631356,
    "end": 634370,
    "text": "HTTPsを使うかHTTPを使うかは問題ではない。"
  },
  {
    "start": 634450,
    "end": 638230,
    "text": "またHTTPを使うだけで、これはまったく問題ではない。"
  },
  {
    "start": 638300,
    "end": 641558,
    "text": "ここでSlack APIのウェブサイトに戻る。"
  },
  {
    "start": 641724,
    "end": 644822,
    "text": "これからやることは、イベントに戻ることだ。"
  },
  {
    "start": 644886,
    "end": 646154,
    "text": "どこにあるのか探してみよう。"
  },
  {
    "start": 646192,
    "end": 649846,
    "text": "イベント・サブスクリプションで、イベントを有効にします。"
  },
  {
    "start": 649878,
    "end": 654586,
    "text": "リクエストURLと書いてあるところに、先ほどコピーしたURLを入れる。"
  },
  {
    "start": 654778,
    "end": 658282,
    "text": "スラッシュ・スラック、そしてイベントだ。"
  },
  {
    "start": 658426,
    "end": 667294,
    "text": "そうしたら、ボットイベントの購読に進み、購読したいイベントをここに追加する。"
  },
  {
    "start": 667412,
    "end": 669982,
    "text": "この場合は、bot userventを追加してくる。"
  },
  {
    "start": 670046,
    "end": 676046,
    "text": "今やりたいことは、チャンネルを持つこと、そしてメッセージ・チャンネルを持つことだ。"
  },
  {
    "start": 676158,
    "end": 683462,
    "text": "これにより、ユーザーが特定のチャンネルで何かをメッセージするすべてのイベントを購読できるようになります。"
  },
  {
    "start": 683596,
    "end": 694730,
    "text": "誰かがメッセージを送ると、このURLにリクエストが送信され、Ngrokを使ってリルートされたリクエストが私たちのローカル・サーバーに送られます。"
  },
  {
    "start": 694800,
    "end": 697114,
    "text": "先に進み、変更を保存を押します。"
  },
  {
    "start": 697312,
    "end": 700662,
    "text": "アプリの権限スコープを変更しました。"
  },
  {
    "start": 700726,
    "end": 703662,
    "text": "これらの変更を有効にするには、アプリを再インストールしてください。"
  },
  {
    "start": 703796,
    "end": 710606,
    "text": "また、チャンネルとヒストリーが必要だとも書いてある。"
  },
  {
    "start": 710708,
    "end": 719946,
    "text": "最初のビデオで、Oauthとパーミッションに行き、チャンネル履歴のスコープを追加したり、チャットを追加したりしたことを思い出してほしい。"
  },
  {
    "start": 719978,
    "end": 724962,
    "text": "今現在は、イベントサブスクリプションを追加したため、このスコープが自動的に追加されている。"
  },
  {
    "start": 725066,
    "end": 729014,
    "text": "もし、何らかの理由で追加されなかったとしても、追加すべきものが表示される。"
  },
  {
    "start": 729052,
    "end": 731478,
    "text": "ここに行って追加し、アプリを再インストールしてください。"
  },
  {
    "start": 731564,
    "end": 734422,
    "text": "とにかく、もう一度アプリの再インストールを押してみよう。"
  },
  {
    "start": 734476,
    "end": 736742,
    "text": "許可ボタンを押せばOKだ。"
  },
  {
    "start": 736796,
    "end": 743258,
    "text": "これでこのページから抜け出し、VSコードに戻って書き続けることができる。"
  },
  {
    "start": 743424,
    "end": 752998,
    "text": "ングロックに行くと、スラックイベントの投稿というリクエストが来ています。"
  },
  {
    "start": 753094,
    "end": 758046,
    "text": "これはつまり、URLを入れただけで、実際にリクエストを受け取ったということだ。"
  },
  {
    "start": 758068,
    "end": 764458,
    "text": "このエンドポイントへのURLが正しいかどうかを確認しているのだ。"
  },
  {
    "start": 764554,
    "end": 769650,
    "text": "さて、APIのページに戻って、その理由を覚えておいてほしい。"
  },
  {
    "start": 769720,
    "end": 772270,
    "text": "イベントの申し込みに戻ろう。"
  },
  {
    "start": 772430,
    "end": 779870,
    "text": "ここにイベントを追加したのは、このアドレスがローカルホストを指しているからだ。"
  },
  {
    "start": 779950,
    "end": 785234,
    "text": "このコードの中で私がしたことは、すべてのイベントをこのエンドポイントに送りたい、ということだ。"
  },
  {
    "start": 785282,
    "end": 787750,
    "text": "だから、そう付け加えたんだ。"
  },
  {
    "start": 787820,
    "end": 795386,
    "text": "さて、もしこれをイベント1のように変更していたら、ここに戻ってングロックをイベント1に変更しなければならない。"
  },
  {
    "start": 795408,
    "end": 796986,
    "text": "私なら、最後に \"1 \"をつけるね。"
  },
  {
    "start": 797088,
    "end": 800314,
    "text": "とにかく、そんなことは必要ないのだが、話を戻そう。"
  },
  {
    "start": 800512,
    "end": 800906,
    "text": "分かった。"
  },
  {
    "start": 800928,
    "end": 807370,
    "text": "さて、これができたところで、次に必要なのは、これらのイベントをすべて処理するルートを作成するか、関数を作成することだ。"
  },
  {
    "start": 807450,
    "end": 814954,
    "text": "スラック・イベント・アダプターと言いますが、スラック・アンダースコア・イベント・アダプターのほうをやるわけではありません。"
  },
  {
    "start": 815002,
    "end": 821426,
    "text": "ここで設定した変数に \"on \"と入力し、この中に \"message \"と入力する。"
  },
  {
    "start": 821608,
    "end": 825122,
    "text": "さて、これは単にon messageイベントを処理するために使うものだ。"
  },
  {
    "start": 825176,
    "end": 829670,
    "text": "メッセージが送信されたら、それを処理して、この中で何かをするんだ。"
  },
  {
    "start": 829820,
    "end": 832280,
    "text": "私はメッセージを定義すると言うつもりだ。"
  },
  {
    "start": 832730,
    "end": 837222,
    "text": "ここにペイロードを積んで、この中でいくつかの異なることをするんだ。"
  },
  {
    "start": 837356,
    "end": 844090,
    "text": "つまり、メッセージが送信されたら、この関数を呼び出して、送信されたペイロードを受け取るということだ。"
  },
  {
    "start": 844160,
    "end": 847834,
    "text": "ペイロードとは、slack APIが送信するデータのことだ。"
  },
  {
    "start": 847952,
    "end": 852602,
    "text": "この場合、送信された特定のメッセージに関するすべてのデータを送ってくる。"
  },
  {
    "start": 852736,
    "end": 857518,
    "text": "つまり、イベントとペイロードの取得はイコールなのだ。"
  },
  {
    "start": 857604,
    "end": 862606,
    "text": "そして、この中にイベント・コンマを入れ、空の辞書を入れる。"
  },
  {
    "start": 862708,
    "end": 867358,
    "text": "つまり、ペイロードの中でキーとなるイベントを探そうということだ。"
  },
  {
    "start": 867454,
    "end": 870526,
    "text": "もしそれがなければ、空白の辞書を返す。"
  },
  {
    "start": 870638,
    "end": 875410,
    "text": "イベント・キーは、そのイベントが何であったかについての情報を与えてくれる。"
  },
  {
    "start": 875480,
    "end": 878606,
    "text": "送信されたメッセージ、すべてのテキスト、その他すべてのように。"
  },
  {
    "start": 878728,
    "end": 882966,
    "text": "さて、最初にできることは、このメッセージがどのチャンネルで送信されたかを確認することだ。"
  },
  {
    "start": 882988,
    "end": 887366,
    "text": "チャンネルidはイベントgetに等しいと言える。"
  },
  {
    "start": 887468,
    "end": 889494,
    "text": "そして、この中で私はチャンネルを言うことができる。"
  },
  {
    "start": 889612,
    "end": 894346,
    "text": "これにより、メッセージが送信されたチャンネルIDがわかる。"
  },
  {
    "start": 894368,
    "end": 894506,
    "text": "そうだろう？"
  },
  {
    "start": 894528,
    "end": 895526,
    "text": "とても簡単だ。"
  },
  {
    "start": 895638,
    "end": 897130,
    "text": "次に、ユーザーID。"
  },
  {
    "start": 897200,
    "end": 900474,
    "text": "ユーザーIDはイベント取得に等しい。"
  },
  {
    "start": 900592,
    "end": 902886,
    "text": "この場合、私はユーザーと言うことができる。"
  },
  {
    "start": 902998,
    "end": 903814,
    "text": "とても簡単だ。"
  },
  {
    "start": 903862,
    "end": 907262,
    "text": "このメッセージを送信したユーザーのIDが表示される。"
  },
  {
    "start": 907316,
    "end": 910234,
    "text": "ペイロードのイベント・キーから取得している。"
  },
  {
    "start": 910362,
    "end": 913934,
    "text": "次に、text equals event getとする。"
  },
  {
    "start": 914052,
    "end": 916178,
    "text": "これがどうなるか、想像してみてほしい。"
  },
  {
    "start": 916264,
    "end": 917666,
    "text": "単なるテキストだ。"
  },
  {
    "start": 917768,
    "end": 918690,
    "text": "さあ、行こう。"
  },
  {
    "start": 918760,
    "end": 924098,
    "text": "これからすることは、ユーザーから送られてきたものを単純にエコーバックすることだ。"
  },
  {
    "start": 924184,
    "end": 929366,
    "text": "このクライアントチャットアンダースコアポストメッセージを使用します。"
  },
  {
    "start": 929548,
    "end": 932118,
    "text": "では、そのようにしましょう。"
  },
  {
    "start": 932284,
    "end": 936982,
    "text": "私たちがすることは、あなたがメッセージを投稿したときに、ごめんなさい、と言うことです。"
  },
  {
    "start": 937116,
    "end": 940854,
    "text": "メッセージを受け取ったら、そのメッセージが何であれ、単に送り返すだけだ。"
  },
  {
    "start": 940972,
    "end": 943082,
    "text": "ここのテキストをテキストに変更します。"
  },
  {
    "start": 943136,
    "end": 945386,
    "text": "つまり、送られてきたものは何でも送り返すということだ。"
  },
  {
    "start": 945488,
    "end": 948906,
    "text": "その場合、チャンネルは単にチャンネルIDに変更される。"
  },
  {
    "start": 949008,
    "end": 951146,
    "text": "チャンネルはチャンネルIDに等しいと言っておこう。"
  },
  {
    "start": 951248,
    "end": 954122,
    "text": "今は、メッセージが送信されるたびに、別のメッセージを送り返す。"
  },
  {
    "start": 954176,
    "end": 955474,
    "text": "それは単なるイコライザーだ。"
  },
  {
    "start": 955542,
    "end": 956590,
    "text": "それは取っておこう。"
  },
  {
    "start": 956660,
    "end": 960158,
    "text": "ここでミスをしたかもしれないが、このコードを実行してみよう。"
  },
  {
    "start": 960244,
    "end": 962026,
    "text": "さて、それではサーバーを動かしてみよう。"
  },
  {
    "start": 962138,
    "end": 963674,
    "text": "ングロックをご覧ください。"
  },
  {
    "start": 963722,
    "end": 964654,
    "text": "おっと、これは閉めたい。"
  },
  {
    "start": 964692,
    "end": 969202,
    "text": "その間違ったものを開き続けていると、すべてのイベントが表示されるんだ。"
  },
  {
    "start": 969336,
    "end": 970942,
    "text": "スラックに戻ろう。"
  },
  {
    "start": 971086,
    "end": 973714,
    "text": "この場合、実際にスラック・チャンネルに戻ってみる。"
  },
  {
    "start": 973832,
    "end": 975330,
    "text": "今から何か送るよ。"
  },
  {
    "start": 975400,
    "end": 976690,
    "text": "高いところを送るつもりだ。"
  },
  {
    "start": 976840,
    "end": 981398,
    "text": "YouTubeのボットが高評価を返し続けていることに気づく。"
  },
  {
    "start": 981564,
    "end": 983414,
    "text": "さて、ここでちょっと問題があるよね？"
  },
  {
    "start": 983532,
    "end": 985510,
    "text": "ただ、常に高値を送り返すだけだ。"
  },
  {
    "start": 985580,
    "end": 993434,
    "text": "Ngrokにアクセスすると、メッセージが送信されたと表示される。"
  },
  {
    "start": 993552,
    "end": 1003194,
    "text": "さて、なぜHighを送信し続けるかというと、このコードを見てみると、実際にやったことはメッセージが送信された状況を処理しただけだからだ。"
  },
  {
    "start": 1003232,
    "end": 1009086,
    "text": "もしメッセージが送られたなら、誰が送ったかは関係なく、たとえ自分たちのボットであっても、メッセージを送り返す。"
  },
  {
    "start": 1009188,
    "end": 1016974,
    "text": "つまり、メッセージを送信するときに、前のメッセージが自分たちからのものでなかった場合のみ送信するようにする必要があるんだ。"
  },
  {
    "start": 1017012,
    "end": 1020158,
    "text": "私たち自身のメッセージに返信したくないのです。"
  },
  {
    "start": 1020254,
    "end": 1026302,
    "text": "これから行うのは、送られてくるメッセージ・イベントがボットからのものなのか、それとも自分自身からのものなのかをチェックすることだ。"
  },
  {
    "start": 1026446,
    "end": 1032390,
    "text": "さて、そのためにはどうすればいいかというと、実はこのサーバーをちょっと止めさせてほしいんだ。"
  },
  {
    "start": 1032460,
    "end": 1035254,
    "text": "コントロールCをやろう。"
  },
  {
    "start": 1035372,
    "end": 1042858,
    "text": "このメッセージのユーザーIDとボットのIDが等しいかどうかをチェックする必要があるが、そのためにはボットのIDを知る必要がある。"
  },
  {
    "start": 1042944,
    "end": 1045466,
    "text": "まず最初にすることは、botアンダースコアidと言うことだ。"
  },
  {
    "start": 1045568,
    "end": 1051674,
    "text": "この関数は、クライアントAPIコールと等しい。"
  },
  {
    "start": 1051792,
    "end": 1057034,
    "text": "これもslack APIの特定のエンドポイントを呼び出す方法だ。"
  },
  {
    "start": 1057162,
    "end": 1059322,
    "text": "それを知っているなら、これは役に立つだろう。"
  },
  {
    "start": 1059386,
    "end": 1060766,
    "text": "そうでないなら、気にする必要はない。"
  },
  {
    "start": 1060788,
    "end": 1061502,
    "text": "問題ないよ。"
  },
  {
    "start": 1061636,
    "end": 1067326,
    "text": "クライアントAPIのアンダースコア・コールと言い、認証テストと言う。"
  },
  {
    "start": 1067508,
    "end": 1071250,
    "text": "さて、これで何ができるかというと、いくつかの情報を私たちに返してくれる。"
  },
  {
    "start": 1071400,
    "end": 1074942,
    "text": "その情報のひとつが、ボットのIDだ。"
  },
  {
    "start": 1075086,
    "end": 1078020,
    "text": "を取得するには、ユーザー・アンダースコア・IDと言うことになる。"
  },
  {
    "start": 1078390,
    "end": 1084562,
    "text": "この行がやっていることは、ボットのIDを与えているだけだと想像してほしい。"
  },
  {
    "start": 1084626,
    "end": 1088946,
    "text": "このユーザーIDとボットのIDが等しいかどうかをチェックすればよい。"
  },
  {
    "start": 1089058,
    "end": 1091370,
    "text": "もしそうなら、メッセージを送らないだけだ。"
  },
  {
    "start": 1091520,
    "end": 1099546,
    "text": "もしボットのアンダースコアIDがユーザーIDと等しくなければ、そのメッセージを送信する。"
  },
  {
    "start": 1099728,
    "end": 1101178,
    "text": "それは取っておこう。"
  },
  {
    "start": 1101344,
    "end": 1102886,
    "text": "サーバーを動かしてみよう。"
  },
  {
    "start": 1102998,
    "end": 1104494,
    "text": "ここにコロンが必要だ。"
  },
  {
    "start": 1104532,
    "end": 1105658,
    "text": "これは構文エラーになる。"
  },
  {
    "start": 1105674,
    "end": 1110366,
    "text": "コロンが追加され、同様にインデントされたブロックが予想される。"
  },
  {
    "start": 1110388,
    "end": 1111258,
    "text": "申し訳ない。"
  },
  {
    "start": 1111354,
    "end": 1112206,
    "text": "それを実行しよう。"
  },
  {
    "start": 1112228,
    "end": 1113790,
    "text": "さて、これですべてが動いていることがわかる。"
  },
  {
    "start": 1113860,
    "end": 1117940,
    "text": "slackに戻って、hello, worldを送ろう。"
  },
  {
    "start": 1118550,
    "end": 1119506,
    "text": "ちょっと待ってくれ。"
  },
  {
    "start": 1119608,
    "end": 1121938,
    "text": "ボットがhello, worldを返していることに注目してほしい。"
  },
  {
    "start": 1122024,
    "end": 1124450,
    "text": "を送り続けているわけではない。"
  },
  {
    "start": 1124600,
    "end": 1127460,
    "text": "こんにちは、僕はティムです。"
  },
  {
    "start": 1127990,
    "end": 1130558,
    "text": "こんにちは、ティムです。"
  },
  {
    "start": 1130664,
    "end": 1133922,
    "text": "これが基本であり、イベントを購読する方法である。"
  },
  {
    "start": 1134066,
    "end": 1136790,
    "text": "もちろん、他にもいろいろなイベントがある。"
  },
  {
    "start": 1136860,
    "end": 1138866,
    "text": "ボットイベントの申し込みはこちら。"
  },
  {
    "start": 1138898,
    "end": 1141830,
    "text": "スクロールして好きなイベントを選ぶことができる。"
  },
  {
    "start": 1141900,
    "end": 1152618,
    "text": "スコープが自動的に追加されるので、あとはその特定のイベントを処理するために必要な文字列が何なのかを、ちょっと調べるだけでいい。"
  },
  {
    "start": 1152704,
    "end": 1156606,
    "text": "別のイベントが必要なら、私がここでやったこととまったく同じことを書けばいい。"
  },
  {
    "start": 1156708,
    "end": 1164110,
    "text": "入ってくるペイロードは少し違うかもしれないが、チャンネル、ユーザー、テキスト、時間など同じ情報を得ることができる。"
  },
  {
    "start": 1164180,
    "end": 1166078,
    "text": "他にもいろいろある。"
  },
  {
    "start": 1166164,
    "end": 1173026,
    "text": "最後に、ペイロードがどのようなものかをプリントアウトしておこう。"
  },
  {
    "start": 1173048,
    "end": 1176998,
    "text": "このようにペイロードを印刷するとしよう。"
  },
  {
    "start": 1177164,
    "end": 1182680,
    "text": "コンソールに入り、slackに行き、メッセージを送ろう。"
  },
  {
    "start": 1183690,
    "end": 1184760,
    "text": "こんにちは、世界よ。"
  },
  {
    "start": 1185290,
    "end": 1189574,
    "text": "ここを見れば、ペイロードが正しいことがわかるだろう。"
  },
  {
    "start": 1189612,
    "end": 1191446,
    "text": "これだけのものが入ってきているんだ。"
  },
  {
    "start": 1191468,
    "end": 1193718,
    "text": "これが、私たちを通過しているすべての情報である。"
  },
  {
    "start": 1193804,
    "end": 1203258,
    "text": "この情報を自分で解析して、必要な情報を得ることもできるが、ただプリントアウトして、APIから実際に何が返ってくるかを見てみることもできる。"
  },
  {
    "start": 1203354,
    "end": 1206398,
    "text": "とにかく、ビデオはここで終わりにしようと思う。"
  },
  {
    "start": 1206484,
    "end": 1213070,
    "text": "メッセージをどのように扱うか、そして今後他のイベントをどのように扱うか、直感的に理解していただけたと思う。"
  },
  {
    "start": 1213140,
    "end": 1220542,
    "text": "他のイベントも扱いますが、何が可能かを知ってもらい、自分だけのボットを作ってもらうために、いろいろなことをお見せしようと思っています。"
  },
  {
    "start": 1220596,
    "end": 1224490,
    "text": "特定の目的を持った本格的なボットのようにするつもりはない。"
  },
  {
    "start": 1224570,
    "end": 1226786,
    "text": "とにかく、いつものように、楽しんでもらえたらうれしい。"
  },
  {
    "start": 1226818,
    "end": 1231250,
    "text": "次回のslackボットチュートリアルでまたお会いしましょう。"
  }
]